{% extends 'base.html.twig' %}

{% block stylesheets %}
<link rel="stylesheet" href="/css/main.css">
{% endblock %}

{% block title %}
Réservations
{% endblock %}

{% if app.user.isAdmin %}
{% form_theme formResa 'bootstrap_4_layout.html.twig' %}
{% endif %}

{% block body %}
  <div class="contenu col-xs-12 col-m-10">
    <div class="titre">
     <h1>Liste des réservations</h1>
    </div>
    <div class="perso">
    {% if app.user.isAdmin == false %}
      <table>
        <caption>Mes dernières réservations</caption>
        <tr>
          <td>Date de réservation</td>
          <td>Heure de début</td>
          <td>Temps de réservation</td>
          <td>Temps maximum</td>
          <td>Matériel réservé</td>
          <td>Jeu réservé</td>
        </tr>
        {% for resa in resas %}
        <tr>
          <td>{{ resa.createdAt | date('d/m/Y') }}</td>
          <td>{{ resa.startAt | date('H:i') }}</td>
          <td>{{ resa.duree | date('H:i') }}</td>
          <td>{{ resa.user.gameTime | date('H:i') }}</td>
          <td>{{ resa.materiel }}</td>
          <td>{{ resa.game }}</td>
        </tr>
      {% endfor %}
      </table>
      </div>
    </div>
    {% elseif app.user.isAdmin %}
    {{ form_start(formResa) }}
    <div class="d-flex flex-column justify-content-center">
      {{ form_row(formResa.user) }}
      {{ form_row(formResa.duree) }}
      {{ form_row(formResa.materiel) }}
      {{ form_row(formResa.game) }}
      <button type="submit" class="btn btn-success" name="button">
      Enregistrer la réservation
      </button>
    </div>
    {{ form_end(formResa) }}
    <table>
      <caption>Les réservations du jour</caption>
      <tr>
        <td>Auteur de la réservation</td>
        <td>Heure de début</td>
        <td>Temps de réservation</td>
        <td>Matériel réservé</td>
        <td>Jeu réservé</td>
      </tr>
      {% for resa in resas %}
      <tr>
        <td>{{ resa.user }}</td>
        <td>{{ resa.startAt | date('H:i') }}</td>
        <td>{{ resa.duree | date('H:i') }}</td>
        <td>{{ resa.materiel }}</td>
        <td>{{ resa.game }}</td>
      </tr>
    {% endfor %}
    </table>
    </div>
  </div>
    {% endif %}
{% endblock %}
